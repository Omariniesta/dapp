<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zyper Mini App</title>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background-color: #ffffff;
      color: #000000;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }.header, .footer {
  background-color: #0088cc;
  color: white;
  padding: 1rem;
  text-align: center;
}

.main {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  display: none;
}

.main.active {
  display: block;
}

.stats, .tasks, .mint, .defi {
  background: #f0f8ff;
  padding: 1rem;
  border-radius: 10px;
  margin-bottom: 1rem;
}

.task-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #fff;
  padding: 1rem;
  border: 1px solid #ccc;
  border-radius: 8px;
  margin-bottom: 1rem;
}

.task-card button {
  margin-top: 0.5rem;
  background: #0088cc;
  color: white;
  padding: 0.5rem;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

button.link-btn {
  width: 50%;
  padding: 0.8rem;
  margin: 0.5rem auto;
  display: block;
  background: #0088cc;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
}

.nft-preview {
  height: 200px;
  background: #e6f2ff;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 1rem;
  border: 1px dashed #0088cc;
}

.nav {
  display: flex;
  justify-content: space-around;
  background-color: #0088cc;
}

.nav button {
  flex: 1;
  padding: 0.5rem;
  background: none;
  border: none;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 0.9rem;
}

.nav button.active {
  color: #000;
  font-weight: bold;
  background: #e6f2ff;
}

.nav svg {
  width: 20px;
  height: 20px;
}

  </style>
</head>
<body>
  <div class="header">Zyper</div>  <div id="home" class="main active">
    <div class="stats">
      <h3>User Stats</h3>
      <p id="username">Username: @loading...</p>
      <p>Zyper Points: <span id="points">0</span> </p>
      <p>Referrals:<span id="referrals">0</span> </p>
    </div>
    <button class="link-btn" onclick="switchTab('task')">Start Task</button>
    <button class="link-btn" onclick="switchTab('mint')">Mint NFT</button>
    <button class="link-btn" onclick="switchTab('defi')">DeFi</button>
    <button class="link-btn" onclick="window.open('https://zyper.org')">Visit Website</button>
  </div>  
  <div id="task-list" class="main">
    <div class="tasks">
      <h3>Complete Tasks</h3>
      <div class="task-card">
        <div>
          <p>âœ… Daily Check-in</p>
          <button>Check-in</button>
        </div>
        <span>+5 pts</span>
      </div>
      <div class="task-card">
        <div>
          <p>Join Telegram Group</p>
          <button onclick="window.open('https://t.me/yourgroup')">Join</button>
        </div>
        <span>+10 pts</span>
      </div>
      <div class="task-card">
        <div>
          <p>Follow us on X</p>
          <button onclick="window.open('https://x.com/youraccount')">Follow</button>
        </div>
        <span>+8 pts</span>
      </div>
      <div class="task-card">
        <div>
          <p>Invite 5 friends</p>
          <button>Invite Now</button>
        </div>
        <span>+20 pts</span>
      </div>
      <div class="task-card">
        <div>
          <p>Mint an NFT</p>
          <button onclick="window.open('ton://transfer?amount=20000000&text=Mint+Zyper+NFT')">Mint NFT</button>
        </div>
        <span>+15 pts</span>
      </div>
    </div>
  </div>  <div id="mint" class="main">
    <div class="mint">
      <div class="nft-preview">NFT Preview Image</div>
      <button class="link-btn" onclick="window.open('ton://transfer/UQCySGvIswTSBOmO5U4ufFVjEi65a63j0PTo2qoPN_yJiF5M?amount=5000000000')">Mint NFT (5 TON)</button>
    </div>
</div>  <div id="defi" class="main">
  <div class="defi">
    <button class="link-btn">Connect Wallet</button>
    <p>Wallet Balance: 0.00 TON</p>
    <div class="staking" style="margin-top:1rem; background:#fff; padding:1rem; border-radius:10px;">
      <h4>NFT Staking</h4>
      <p>Stake your NFT to earn passive rewards.</p>
      <button class="link-btn">Stake Now</button>
    </div>
  </div>
</div>  <div class="footer nav">
  <button class="active" onclick="switchTab('home')">
    <i data-lucide="home"></i>
    Home
  </button>
  <button onclick="switchTab('task')">
    <i data-lucide="list-check"></i>
    Task
  </button>
  <button onclick="switchTab('mint')">
    <i data-lucide="image"></i>
    Mint
  </button>
  <button onclick="switchTab('defi')">
    <i data-lucide="wallet"></i>
    DeFi
  </button>
</div>  <script>
  lucide.createIcons();

  function switchTab(tab) {
    document.querySelectorAll('.main').forEach(div => div.classList.remove('active'));
    document.getElementById(tab).classList.add('active');
    document.querySelectorAll('.footer button').forEach(btn => btn.classList.remove('active'));
    event.target.closest('button').classList.add('active');
  }

  // Mock Telegram User (replace with real data from WebApp)
  const user = {
    username: "zyper_gamer"
  };

  document.getElementById('username').innerText = "Username: @" + user.username;
</script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const username = "zyper_gamer"; // Or any username in your users.json
    
        fetch(http://127.0.0.1:8000/user/${username})
            .then(res => res.json())
            .then(data => {
                document.getElementById("username").textContent = data.username;
                document.getElementById("points").textContent = data.points;
                document.getElementById("referrals").textContent = data.referrals;
            })
            .catch(error => console.error("User fetch error:", error));
    
        fetch("http://127.0.0.1:8000/tasks")
            .then(res => res.json())
            .then(tasks => {
                const taskContainer = document.getElementById("task-list");
                taskContainer.innerHTML = "";
                tasks.forEach(task => {
                    taskContainer.innerHTML += 
                        <div class="bg-white shadow p-2 rounded-lg mb-2 flex justify-between items-center">
                            <span>${task.title}</span>
                            <span class="text-blue-500 font-bold">+${task.points} pts</span>
                        </div>
                    ;
                });
            })
            .catch(error => console.error("Tasks fetch error:", error));
    });
    </script>
</body>
</html>
